<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- CSS de Bootstrap-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
        <style>
            @import url("https://fonts.googleapis.com/css2?family=Trispace:wght@300;400;600&display=swap");

            :root {
                --bs-body-font-family: "Trispace", sans-serif;
                --bs-body-color: #eef;
                --bs-body-bg: #10121c;
            }
            body {
                background-image: url(img/mc0013838.jpg);
                background-repeat: no-repeat;
                background-position: center bottom;
                background-size: 100% auto;
            }
        </style>
        <title>Introducción al Desarrollo Front End con HTML, CSS y JavaScript</title>
    </head>
    <body>
        <header>
            <div class="container">
                <div class="row pt-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                        <h1 class="display-4 text-center py-2">Terremotos en Chile</h1>
                        <p class="lead">
                            Ubicado en el llamado Cinturón de Fuego del Pacífico, Chile es una de las regiones más sísmicas del planeta. Bajo su territorio convergen y subductan las placas oceánicas de Nazca y Antártica bajo la placa
                            continental Sudamericana, provocando periódicamente movimientos telúricos de diversa magnitud que en ocasiones desencadenan gigantescas catástrofes. En el sector austral del continente, la sismicidad está
                            asociada al proceso de deslizamiento horizontal entre la placa Scotia y la Sudamericana, originando la Falla de Magallanes-Fagnano. Con el pasar del tiempo, los terremotos han pasado a formar parte de la
                            identidad colectiva de los chilenos, quedando registrados en la cultura popular a través de la tradición oral.
                        </p>
                        <p>
                            En 1960 ocurre el terremoto de mayor magnitud registrado en el mundo -9,5-, devastó las provincias de Cautín, Valdivia, Osorno, Llanquihue y Chiloé, al extenderse la zona de ruptura entre las penínsulas de Arauco
                            y Taitao, por cerca de 100 km. causando graves daños en la ciudad de Valdivia. El sismo fue acompañado por un tsunami que provocó una sucesión de enormes olas que arrasaron con las ciudades costeras frente a la
                            zona de ruptura produciendo víctimas fatales -incluso- en lugares tan alejados como Japón. Asimismo, hubo grandes levantamientos y hundimientos del terreno. Algunas zonas quedaron sumergidas bajo el mar, al mismo
                            tiempo que un derrumbe en el río San Pedro provocó un aumento de volumen del lago Riñiue que, de no haber sido solucionado rápidamente, habría arrasado con lo que quedaba de Valdivia.
                        </p>
                        <p>De la <a href="https://github.com/pibi99/intento1/blob/main/terremotos.csv" target="_blank" class="link-light">lista de terremotos</a>, podemos obtener algunos datos:</p>
                    </div>
                </div>
            </div>
        </header>
        <main class="container">
            <div class="accordion mx-md-5 my-5 rounded-0" id="accordionExample">
                <!--tsunamis-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header bg-dark" id="headingOne">
                        <button class="accordion-button rounded-0" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">TSUNAMIS</button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                                La cantidad de tsunamis acontecidos fueron de, <span id="Tsunamis"></span> de ellos fueron con alerta activada y luego descartada <span id="alertatsunami"></span> y otros fueron micro tsunami, con olas
                                inferiores a los 30 metros
                                <span id="micro_tsunami"></span>
                            </p>
                            <canvas id="tsunamis" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Pasajeras y pasajeros-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Cantidad de terremotos por zonas afectadas</button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                                La cantidad de terremotos en el Norte Grande fue de, <span id="norte_grande"></span> en el Norte Chico de, <span id="norte_chico"></span> en la Zona Central hubieron, <span id="zona_central"></span> en la
                                Zona Sur, <span id="zona_sur"></span> y en la Zona Austral. <span id="zona_austral"></span>
                            </p>
                            <canvas id="Zonas Afectadas" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Clases-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Muertos en las regiones de la zona Austral
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>En la región de Aysén murieron <span id="aysen"></span> y en la región de Magallanes. <span id="magallanes"></span>.</p>
                            <canvas id="Zona Austral" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Otros-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">La escala Richter</button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>
                                Los terremotos medidos con escala richter fueron <span id="norichter"></span> y con la escala sismológica de magnitud de momento
                                <span id="richter"></span>
                            </p>
                            <canvas id="RichterEscala" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Otro más-->
                <div class="accordion-item rounded-0">
                    <h2 class="accordion-header" id="headingFive">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">Muertes</button>
                    </h2>
                    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#accordionExample">
                        <div class="accordion-body text-black-50">
                            <p>No hay registros de muerte en tales regiones <span id="noregistro"></span> y registro de fallecidos <span id="muertos"></span></p>
                            <canvas id="Muertes" width="100" height="100" class="m-5"></canvas>
                        </div>
                    </div>
                </div>
                <!--Fin-->
            </div>
            <div class="row">
                <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                    <p>
                        Los principales terremotos que han afectado al país. En general, se incluyen aquellos terremotos que han alcanzado una magnitud superior a 7 en la escala
                        sismológica de Richter. Sin embargo, no se listan todos los que han alcanzado dicha magnitud, puesto que muchos son réplicas de eventos mayores, mientras que otros no han sido de gran importancia al no tener efectos
                        de gran consideración. Por otro lado, se han listado algunos eventos sísmicos que, aunque no han sobrepasado la magnitud de 7,0, sí han tenido notoriedad, en función de sus daños.
                    </p>
                </div>
            </div>
        </main>
        <aside>
            <div class="container">
                <div class="row py-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto small text-center">
                        <p>
                            Fuentes:
                            <a href="http://www.memoriachilena.gob.cl/602/w3-article-3576.html">Los terremotos, una constante en toda la historia de Chile</a>,

                            <a href="https://rpubs.com/psandoval/554600">RPubs - Terremotos</a>, <a href="https://es.wikipedia.org/wiki/Anexo:Terremotos_en_Chile">Terremotos en Chile</a>,otra y otra más.
                        </p>
                    </div>
                </div>
            </div>
        </aside>
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col">
                        <p class="text-muted mt-5 text-center small">Bootstrap v5.1 y Charts.js</p>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Biblioteca de Bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <!-- Biblioteca Chart.js -->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"
            integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script>
            async function todo() {
                //el fetch
                const consulta = await fetch("https://raw.githubusercontent.com/pibi99/intento1/main/datos%20(3).json");
                const data = await consulta.json();
                //algunas variables para calcular
                var tsunamis = [];
                var alertadescartada = [];
                var micro = [];

                var NorteG = [];
                var NorteC = [];
                var ZonaC = [];
                var ZonaS = [];
                var ZonaA = [];

                var Aysen = [];
                var Magallanes = [];

                var EscalaSismologicadeMagnitud = [];
                var EscladeRichter = [];

                var vivos = [];
                var muertos = [];
                //consultando en cada elemento del arreglo
                data.forEach((d) => {
                    if (d.tsunami == "T") {
                        tsunamis = tsunamis + 1;
                    } else if (d.tsunami == "AD") {
                        alertadescartada = alertadescartada + 1;
                    } else if (d.tsunami == "mT") {
                        micro = micro + 1;
                    }

                    if ((d.Zonasafectadas == "Región Metropolitana", "VII", "V")) {
                        ZonaC = ZonaC + 1;
                    } else if ((d.Zonasafectadas == "XV", "I", "II")) {
                        NorteG = NorteG + 1;
                    } else if ((d.Zonasafectadas == "III", "IV", "XVI")) {
                        NorteC = NorteC + 1;
                    } else if ((d.Zonasafectadas == "VIII", "IX", "XIV", "X")) {
                        ZonaS = ZonaS + 1;
                    } else if ((d.Zonasafectadas == "XI", "XII")) {
                        ZonaA = ZonaA + 1;
                    }

                    if (d.mm == "XI") {
                        Aysen = Aysen + 1;
                    } else if (d.mm == "XII") {
                        Magallanes = Magallanes + 1;
                    }

                    if (d.ms == "Mw") {
                      EscalaSismologicadeMagnitud = EscalaSismologicadeMagnitud + 1;
                    } else {
                        EscladeRichter = EscladeRichter + 1;
                    }

                    if (d.muertos == 0) {
                        vivos = vivos + 1;
                    } else {
                        muertos = muertos + 1;
                    }
                });
                console.log(tsunamis);
                console.log(alertadescartada);
                console.log(micro);

                console.log(NorteG);
                console.log(NorteC);
                console.log(ZonaC);
                console.log(ZonaS);
                console.log(ZonaA);

                console.log(Aysen);
                console.log(Magallanes);

                console.log(EscalaSismologicadeMagnitud);
                console.log(EscladeRichter);

                console.log(vivos);
                console.log(muertos);

                document.querySelector("#Tsunamis").innerHTML = tsunamis;
                document.querySelector("#alertatsunami").innerHTML = alertadescartada;
                document.querySelector("#micro_tsunami").innerHTML = micro;

                document.querySelector("#norte_grande").innerHTML = NorteG;
                document.querySelector("#norte_chico").innerHTML = NorteC;
                document.querySelector("#zona_central").innerHTML = ZonaC;
                document.querySelector("#zona_sur").innerHTML = ZonaS;
                document.querySelector("#zona_austral").innerHTML = ZonaA;

                document.querySelector("#aysen").innerHTML = Aysen;
                document.querySelector("#magallanes").innerHTML = Magallanes;

                document.querySelector("#norichter").innerHTML = EscalaSismologicadeMagnitud;
                document.querySelector("#richter").innerHTML = EscladeRichter;

                document.querySelector("#noregistro").innerHTML = vivos;
                document.querySelector("#muertos").innerHTML = muertos;

                // El gráfico de las edades

                new Chart(document.getElementById("tsunamis").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["Tsunamis acontecidos", "Alerta de tsunami y luego descartada", "Micro tsunami"],
                        datasets: [{ data: [tsunamis, alertadescartada, micro], label: "Tsunamis en Chile", backgroundColor: ["#e5f5e0", "#a1d99b", "#31a354"] }],
                    },
                });

                new Chart(document.getElementById("Zonas Afectadas").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["Norte Grande", "Norte Chico", "Zona Central", "Zona Sur", "Zona Austral"],
                        datasets: [{ data: [NorteG, NorteC, ZonaC, ZonaS, ZonaA], label: "Cantidad de terremotos por zona afectada", backgroundColor: ["#e5f5e0", "#a1d99b", "#31a354", "#458b74", "#8b8378"] }],
                    },
                });

                new Chart(document.getElementById("Zona Austral").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["Región de Aysén", "Región de Magallanes"],
                        datasets: [{ data: [Aysen, Magallanes], label: "Muertos en la Zona Austral", backgroundColor: ["#e5f5e0", "#a1d99b"] }],
                    },
                });
                new Chart(document.getElementById("RichterEscala").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["Escala Mw", "Escala de Richter"],
                        datasets: [{ data: [EscalaSismologicadeMagnitud, EscladeRichter], label: "Escala de Richter", backgroundColor: ["#e5f5e0", "#a1d99b"] }],
                    },
                });

                new Chart(document.getElementById("Muertes").getContext("2d"), {
                    type: "pie",
                    data: {
                        labels: ["Vivos", "Muertos"],
                        datasets: [{ data: [vivos, muertos], label: "Muertes", backgroundColor: ["#8b8378", "#a1d99b"] }],
                    },
                });

                //¡No toques lo que sigue!
            }
            todo().catch((error) => console.error(error));
        </script>
    </body>
</html>
